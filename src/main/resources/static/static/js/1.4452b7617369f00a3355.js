webpackJsonp([1],{"2eoi":function(e,t,i){var s={"./Home.vue":"lO7g","./Login.vue":"xJsL","./MonacoEditor.vue":"qxYs","./Profile.vue":"o9cx","./Register.vue":"dIqY","./Setting.vue":"cbWt","./jenkins/PerBuild.vue":"kVG2","./jenkins/PerCreate.vue":"gQW8","./jenkins/PerJkfile.vue":"lgBs","./jenkins/PerResult.vue":"DRYX","./jenkins/PerServer.vue":"vIsk","./system/SysHr.vue":"ewEk"};function a(e){return i(n(e))}function n(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="2eoi"},"5oPJ":function(e,t){},DRYX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-steps",{attrs:{active:4,simple:""}},[i("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),i("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),i("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}}),e._v(" "),i("el-step",{attrs:{title:"Build",icon:"el-icon-lightning"}}),e._v(" "),i("el-step",{attrs:{title:"Result",icon:"el-icon-s-promotion"}})],1),e._v(" "),i("h1",{staticStyle:{"font-family":"Microsoft YaHei","font-size":"25px"}},[e._v("Build Job")]),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:e.startBuild}},[e._v("Get Building Result")]),e._v(" "),i("a",{attrs:{href:"http://3.15.149.72:8080/job/"+e.$store.state.projectName}},[e._v("Link To Jenkins Result")]),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:32,placeholder:"ConsoleOutput:"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)},staticRenderFns:[]};var a=i("VU/8")({data:function(){return{textarea:""}},methods:{startBuild:function(){var e=this,t=this;this.loading=!0,this.postRequest("/jenkins/output",{projectName:this.$store.state.projectName}).then(function(i){t.loading=!1,i&&200==i.status&&(e.textarea=i.data)})}}},s,!1,function(e){i("d9ug")},null,null);t.default=a.exports},Fl6l:function(e,t){},QHLv:function(e,t){},"a+qj":function(e,t){},d9ug:function(e,t){},ewEk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{keywords:"",fullloading:!1,hrs:[],cardLoading:[],eploading:[],allRoles:[],moreBtnState:!1,selRoles:[],selRolesBak:[]}},mounted:function(){this.initCards(),this.loadAllRoles()},methods:{searchClick:function(){this.initCards(),this.loadAllRoles()},updateHrRoles:function(e,t){this.moreBtnState=!1;var i=this;if(this.selRolesBak.length==this.selRoles.length){for(var s=0;s<this.selRoles.length;s++)for(var a=0;a<this.selRolesBak.length;a++)if(this.selRoles[s]==this.selRolesBak[a]){this.selRolesBak.splice(a,1);break}if(0==this.selRolesBak.length)return}this.eploading.splice(t,1,!0),this.putRequest("/system/hr/roles",{hrId:e,rids:this.selRoles}).then(function(s){(i.eploading.splice(t,1,!1),s&&200==s.status)&&("success"==s.data.status&&i.refreshHr(e,t))})},refreshHr:function(e,t){var i=this;i.cardLoading.splice(t,1,!0),this.putRequest("/system/hr/id/"+e).then(function(e){i.cardLoading.splice(t,1,!1),i.hrs.splice(t,1,e.data)})},loadSelRoles:function(e,t){var i=this;this.moreBtnState=!0,this.selRoles=[],this.selRolesBak=[],e.forEach(function(e){i.selRoles.push(e.id),i.selRolesBak.push(e.id)})},loadAllRoles:function(){var e=this;this.getRequest("/system/basic/roles").then(function(t){e.fullloading=!1,t&&200==t.status&&(e.allRoles=t.data)})},switchChange:function(e,t,i){var s=this;s.cardLoading.splice(i,1,!0),this.putRequest("/system/hr/",{enabled:e,id:t}).then(function(e){(s.cardLoading.splice(i,1,!1),e&&200==e.status)?"error"==e.data.status&&s.refreshHr(t,i):s.refreshHr(t,i)})},initCards:function(){this.fullloading=!0;var e,t=this;e=""===this.keywords?"all":this.keywords,this.getRequest("/system/hr/"+e).then(function(e){if(e&&200==e.status){t.hrs=e.data;var i=e.data.length;t.cardLoading=Array.apply(null,Array(i)).map(function(e,t){return!1}),t.eploading=Array.apply(null,Array(i)).map(function(e,t){return!1})}})},deleteHr:function(e){var t=this;this.fullloading=!0,this.deleteRequest("/system/hr/"+e).then(function(e){(t.fullloading=!1,e&&200==e.status)&&("success"==e.data.status&&(t.initCards(),t.loadAllRoles()))})}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullloading,expression:"fullloading"}],staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"center","align-items":"center"}},[i("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"默认展示部分用户，可以通过用户名搜索更多用户...","prefix-icon":"el-icon-search",size:"small"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("搜索")])],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap","text-align":"left"}},e._l(e.hrs,function(t,s){return i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading[s],expression:"cardLoading[index]"}],key:t.id,staticStyle:{width:"350px","margin-bottom":"20px"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.name))]),e._v(" "),i("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.deleteHr(t.id)}}})],1),e._v(" "),i("div",[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[i("img",{staticStyle:{width:"70px",height:"70px","border-radius":"70px"},attrs:{src:t.userface,alt:"item.name"}})]),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("div",[i("span",{staticClass:"user-info"},[e._v("用户名:"+e._s(t.name))])]),e._v(" "),i("div",[i("span",{staticClass:"user-info"},[e._v("手机号码:"+e._s(t.phone))])]),e._v(" "),i("div",[i("span",{staticClass:"user-info"},[e._v("电话号码:"+e._s(t.telephone))])]),e._v(" "),i("div",[i("span",{staticClass:"user-info"},[e._v("地址:"+e._s(t.address))])]),e._v(" "),i("div",{staticClass:"user-info",staticStyle:{display:"flex","align-items":"center","margin-bottom":"3px"}},[e._v("\n              用户状态:\n              "),i("el-switch",{key:t.id,staticStyle:{display:"inline","margin-left":"5px"},attrs:{"active-color":"#13ce66","inactive-color":"#aaaaaa","active-text":"启用","inactive-text":"禁用"},on:{change:function(i){return e.switchChange(t.enabled,t.id,s)}},model:{value:t.enabled,callback:function(i){e.$set(t,"enabled",i)},expression:"item.enabled"}})],1),e._v(" "),i("div",{staticClass:"user-info"},[e._v("\n              用户角色:\n              "),e._l(t.roles,function(t){return i("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[e._v(e._s(t.nameZh)+"\n              ")])}),e._v(" "),i("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.eploading[s],expression:"eploading[index]"}],key:t.id,attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(i){return e.updateHrRoles(t.id,s)}}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.selRoles,callback:function(t){e.selRoles=t},expression:"selRoles"}},e._l(e.allRoles,function(e){return i("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id}})}),1),e._v(" "),i("el-button",{staticStyle:{color:"#09c0f6","padding-top":"0px"},attrs:{slot:"reference",type:"text",icon:"el-icon-more",disabled:e.moreBtnState},on:{click:function(i){return e.loadSelRoles(t.roles,s)}},slot:"reference"})],1)],2),e._v(" "),i("div",[i("span",{staticClass:"user-info"},[e._v("备注:"+e._s(t.remark))])])])])])}),1)])},staticRenderFns:[]};var n=i("VU/8")(s,a,!1,function(e){i("5oPJ")},null,null);t.default=n.exports},gQW8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),n={data:function(){return{repoApi:[],value:"",search:""}},computed:{searchData:function(){var e=this,t=this.search;return console.log("search = "+t),t?this.repoApi.filter(function(t){return t.name.toLowerCase().startsWith(e.search.toLowerCase())}):this.repoApi},user:function(){return this.$store.state.user}},mounted:function(){this.initData()},filters:{formatDate:function(e){var t=new Date(e),i=t.getFullYear(),s=t.getMonth()+1;s=s<10?"0"+s:s;var a=t.getDate();a=a<10?"0"+a:a;var n=t.getHours();n=n<10?"0"+n:n;var r=t.getMinutes();r=r<10?"0"+r:r;var o=t.getSeconds();return i+"-"+s+"-"+a+" "+n+":"+r+":"+(o=o<10?"0"+o:o)}},methods:{initData:function(){var e=this;this.getRequest("https://api.github.com/users/"+this.user.githubName+"/repos").then(function(t){if(t&&200==t.status){var i=t.data,s={Java:"#b07219",JavaScript:"#f1e05a",HTML:"#e34c26",Swift:"#ffac45",Python:"#3572A5"};for(var a in i.sort(function(e,t){return new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()}),i)i[a].color=s[i[a].language];e.repoApi=i,console.log(i)}})},clearSearch:function(){this.search=""},createJenkinsJob:function(e,t){var i=this,s=(new Date).getTime()/1e3;console.log(e,t),this.$store.commit("setRepoName",e),this.$store.commit("setProjectName",e+s),this.$store.commit("setLanguage",t),window.localStorage.setItem("repoName",a()(e)),window.localStorage.setItem("projectName",a()(e+s)),window.localStorage.setItem("language",a()(t));var n=this;this.loading=!0,this.postRequest("/jenkins/create",{projectName:e+s,description:"",repo:e}).then(function(a){n.loading=!1,a&&200==a.status&&(i.postRequest("/project/add",{name:e+s,author:i.user.name,language:t,type:0}).then(function(e){}),i.$router.push({path:"/config/server"}),i.$message("Submit Successfully!"))})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-steps",{staticClass:"process",attrs:{active:0,simple:""}},[i("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),i("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),i("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),i("div",{staticClass:"new-pipeline"},[e._v("New Pipeline")]),e._v(" "),i("div",{staticClass:"title"},[e._v("Select a repository")]),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"repo-filter"},[i("i",{staticClass:"el-icon-search"}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"repo-filter-search-input",attrs:{placeholder:"filter by keywords"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.clearSearch()}}})]),e._v(" "),e.searchData.length>0?i("div",{staticStyle:{width:"70%"}},e._l(e.searchData,function(t){return i("div",{staticClass:"repo-list",on:{click:function(i){return e.createJenkinsJob(t.name,t.language)}}},[i("img",{staticClass:"repo-img",attrs:{src:t.owner.avatar_url}}),e._v(" "),i("div",{staticStyle:{float:"left",margin:"8px 0 8px 0"}},[i("div",[i("span",{staticClass:"repo-name"},[e._v(e._s(t.full_name))]),e._v(" "),t.fork?i("span",{staticClass:"repo-fork"},[e._v("fork")]):e._e()]),e._v(" "),i("span",{staticClass:"repo-time",attrs:{height:"auto"}},[e._v(e._s(e._f("formatDate")(t.updated_at)))])]),e._v(" "),i("div",{staticClass:"repo-language"},[i("span",{staticClass:"repo-language-color",style:{background:t.color}}),e._v(" "),i("span",[e._v(e._s(t.language))])])])}),0):i("div",{staticStyle:{width:"70%"}},[i("i",{staticClass:"el-icon-coffee-cup"}),e._v(" "),i("span",[e._v("No matching repositories were found. If you can't find a repository, make sure you provide access.You may also select a specific connection.")])])],1)},staticRenderFns:[]};var o=i("VU/8")(n,r,!1,function(e){i("s+l1")},null,null);t.default=o.exports},kVG2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-steps",{attrs:{active:3,simple:""}},[i("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),i("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),i("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}}),e._v(" "),i("el-step",{attrs:{title:"Build",icon:"el-icon-lightning"}}),e._v(" "),i("el-step",{attrs:{title:"Result",icon:"el-icon-s-promotion"}})],1),e._v(" "),i("h1",{staticClass:"title"},[e._v("Build Job")]),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:e.startBuild}},[e._v("Start Building")])],1)},staticRenderFns:[]};var a=i("VU/8")({data:function(){return{textarea:""}},methods:{startBuild:function(){var e=this,t=this;this.loading=!0,this.postRequest("/jenkins/build",{jobName:this.$store.state.projectName}).then(function(i){t.loading=!1,i&&200==i.status&&e.$router.push({path:"/output"})})}}},s,!1,function(e){i("Fl6l")},null,null);t.default=a.exports},lgBs:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Lakc"),a={data:function(){return{codes:""}},methods:{initData:function(){var e=this;this.postRequest("/github/content",{repo:JSON.parse(window.localStorage.getItem("repoName")),language:JSON.parse(window.localStorage.getItem("language")),githubName:this.user.githubName,githubToken:this.user.githubToken}).then(function(t){t&&200==t.status&&(e.codes=t.data,e.initEditor())})},initEditor:function(){this.monacoEditor=s.a.create(this.$refs.container,{value:this.codes,language:"javascript",theme:"vs",fontSize:14,automaticLayout:!0,autoIndent:!0,editorOptions:this.editorOptions})},submitJenkinsfile:function(){var e=this,t=this;this.loading=!0,this.postRequest("/project/update",{name:JSON.parse(window.localStorage.getItem("projectName")),type:0,enable:!0}).then(function(e){}),this.postRequest("/github/commit",{codeContent:this.monacoEditor.getValue(),repo:JSON.parse(window.localStorage.getItem("repoName")),githubName:this.user.githubName,githubToken:this.user.githubToken}).then(function(i){t.loading=!1,i&&200==i.status&&(e.loading=!0,e.postRequest("/jenkins/build",{jobName:JSON.parse(window.localStorage.getItem("projectName"))}).then(function(e){t.loading=!1,e&&200==e.status&&window.open("http://3.15.149.72:8080/job/"+JSON.parse(window.localStorage.getItem("projectName")))}))})}},mounted:function(){this.initData()},computed:{user:function(){return this.$store.state.user}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-steps",{staticClass:"process",attrs:{active:2,simple:""}},[i("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),i("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),i("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),i("div",{staticStyle:{display:"inline-block",width:"98%","text-align":"left"}},[e._m(0),e._v(" "),i("button",{staticClass:"fl-right run-button",on:{click:e.submitJenkinsfile}},[e._v("Save and run")])]),e._v(" "),i("div",{staticClass:"monaco-container"},[i("div",{staticClass:"file-name"},[e._v("JenkinsFile")]),e._v(" "),i("div",{ref:"container",staticClass:"monaco-editor"})])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl-left"},[t("div",{staticClass:"new-pipeline"},[this._v("New Pipeline")]),this._v(" "),t("div",{staticClass:"title"},[this._v("Review your jenkins file")])])}]};var r=i("VU/8")(a,n,!1,function(e){i("QHLv")},null,null);t.default=r.exports},"s+l1":function(e,t){},vIsk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Lakc"),a={data:function(){return{formLabelAlign:{serverId:"",bashContent:""},serverList:[{serverName:"Windows Server",serverId:1},{serverName:"Linux Server",serverId:2},{serverName:"Docker",serverId:3}],codes:"",readOnly:!1,editorOptions:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:this.readOnly,cursorStyle:"line",automaticLayout:!1,glyphMargin:!0,useTabStops:!1,fontSize:28,autoIndent:!1}}},methods:{initEditor:function(){this.monacoEditor=s.a.create(this.$refs.container,{value:this.codes,language:"javascript",theme:"vs",fontSize:14,automaticLayout:!0,autoIndent:!0,editorOptions:this.editorOptions})},submitBashToServer:function(){var e=this,t=this;this.loading=!0;var i=this.formLabelAlign.serverId;this.postRequest("/project/update",{name:JSON.parse(window.localStorage.getItem("projectName")),type:this.formLabelAlign.serverId,enable:!1}).then(function(e){}),3===i?this.$router.push({path:"/config/jkfile"}):this.postRequest("/server/run",{serverId:this.formLabelAlign.serverId,bashContent:this.monacoEditor.getValue()}).then(function(i){if(t.loading=!1,i&&200==i.status){var s=i.data;alert(s),e.$router.push({path:"/config/jkfile"}),e.$message("Submit Successfully!")}})}},mounted:function(){this.initEditor()}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-steps",{staticClass:"process",attrs:{active:1,simple:""}},[i("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),i("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),i("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),i("div",{staticStyle:{display:"inline-block",width:"98%","text-align":"left"}},[i("div",{staticClass:"fl-left"},[i("div",{staticClass:"new-pipeline"},[e._v("New Pipeline")]),e._v(" "),i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"title"},[e._v("Select your environment")]),e._v(" "),i("el-form",{attrs:{"label-width":"20px",model:e.formLabelAlign}},[i("el-form-item",[i("el-select",{staticClass:"form",attrs:{placeholder:"Select environment"},model:{value:e.formLabelAlign.serverId,callback:function(t){e.$set(e.formLabelAlign,"serverId",t)},expression:"formLabelAlign.serverId"}},e._l(e.serverList,function(e,t){return i("el-option",{key:t,attrs:{label:e.serverName,value:e.serverId}})}),1)],1)],1)],1)]),e._v(" "),i("button",{staticClass:"fl-right run-button",on:{click:e.submitBashToServer}},[e._v("Save and run")])]),e._v(" "),i("div",{staticClass:"monaco-container"},[i("div",{staticClass:"file-name"},[e._v("Please Input Bash Script")]),e._v(" "),i("div",{ref:"container",staticClass:"monaco-editor"})])],1)},staticRenderFns:[]};var r=i("VU/8")(a,n,!1,function(e){i("a+qj")},null,null);t.default=r.exports}});
//# sourceMappingURL=1.4452b7617369f00a3355.js.map