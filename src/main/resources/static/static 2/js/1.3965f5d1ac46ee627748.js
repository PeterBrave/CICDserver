webpackJsonp([1],{"0tRa":function(e,t){},"2eoi":function(e,t,s){var i={"./Home.vue":"lO7g","./Login.vue":"xJsL","./MonacoEditor.vue":"qxYs","./Profile.vue":"o9cx","./Register.vue":"dIqY","./Setting.vue":"cbWt","./jenkins/PerBuild.vue":"kVG2","./jenkins/PerCreate.vue":"gQW8","./jenkins/PerJkfile.vue":"lgBs","./jenkins/PerResult.vue":"DRYX","./jenkins/PerServer.vue":"vIsk","./system/SysHr.vue":"ewEk"};function a(e){return s(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="2eoi"},"51DM":function(e,t){},"5oPJ":function(e,t){},DRYX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-steps",{attrs:{active:4,simple:""}},[s("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),s("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),s("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}}),e._v(" "),s("el-step",{attrs:{title:"Build",icon:"el-icon-lightning"}}),e._v(" "),s("el-step",{attrs:{title:"Result",icon:"el-icon-s-promotion"}})],1),e._v(" "),s("h1",{staticStyle:{"font-family":"Microsoft YaHei","font-size":"25px"}},[e._v("Build Job")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:e.startBuild}},[e._v("Get Building Result")]),e._v(" "),s("a",{attrs:{href:"http://3.15.149.72:8080/job/"+e.$store.state.projectName}},[e._v("Link To Jenkins Result")]),e._v(" "),s("el-input",{attrs:{type:"textarea",rows:32,placeholder:"ConsoleOutput:"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)},staticRenderFns:[]};var a=s("VU/8")({data:function(){return{textarea:""}},methods:{startBuild:function(){var e=this,t=this;this.loading=!0,this.postRequest("/jenkins/output",{projectName:this.$store.state.projectName}).then(function(s){t.loading=!1,s&&200==s.status&&(e.textarea=s.data)})}}},i,!1,function(e){s("d9ug")},null,null);t.default=a.exports},Fl6l:function(e,t){},HtLs:function(e,t){},d9ug:function(e,t){},ewEk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{keywords:"",fullloading:!1,hrs:[],cardLoading:[],eploading:[],allRoles:[],moreBtnState:!1,selRoles:[],selRolesBak:[]}},mounted:function(){this.initCards(),this.loadAllRoles()},methods:{searchClick:function(){this.initCards(),this.loadAllRoles()},updateHrRoles:function(e,t){this.moreBtnState=!1;var s=this;if(this.selRolesBak.length==this.selRoles.length){for(var i=0;i<this.selRoles.length;i++)for(var a=0;a<this.selRolesBak.length;a++)if(this.selRoles[i]==this.selRolesBak[a]){this.selRolesBak.splice(a,1);break}if(0==this.selRolesBak.length)return}this.eploading.splice(t,1,!0),this.putRequest("/system/hr/roles",{hrId:e,rids:this.selRoles}).then(function(i){(s.eploading.splice(t,1,!1),i&&200==i.status)&&("success"==i.data.status&&s.refreshHr(e,t))})},refreshHr:function(e,t){var s=this;s.cardLoading.splice(t,1,!0),this.putRequest("/system/hr/id/"+e).then(function(e){s.cardLoading.splice(t,1,!1),s.hrs.splice(t,1,e.data)})},loadSelRoles:function(e,t){var s=this;this.moreBtnState=!0,this.selRoles=[],this.selRolesBak=[],e.forEach(function(e){s.selRoles.push(e.id),s.selRolesBak.push(e.id)})},loadAllRoles:function(){var e=this;this.getRequest("/system/basic/roles").then(function(t){e.fullloading=!1,t&&200==t.status&&(e.allRoles=t.data)})},switchChange:function(e,t,s){var i=this;i.cardLoading.splice(s,1,!0),this.putRequest("/system/hr/",{enabled:e,id:t}).then(function(e){(i.cardLoading.splice(s,1,!1),e&&200==e.status)?"error"==e.data.status&&i.refreshHr(t,s):i.refreshHr(t,s)})},initCards:function(){this.fullloading=!0;var e,t=this;e=""===this.keywords?"all":this.keywords,this.getRequest("/system/hr/"+e).then(function(e){if(e&&200==e.status){t.hrs=e.data;var s=e.data.length;t.cardLoading=Array.apply(null,Array(s)).map(function(e,t){return!1}),t.eploading=Array.apply(null,Array(s)).map(function(e,t){return!1})}})},deleteHr:function(e){var t=this;this.fullloading=!0,this.deleteRequest("/system/hr/"+e).then(function(e){(t.fullloading=!1,e&&200==e.status)&&("success"==e.data.status&&(t.initCards(),t.loadAllRoles()))})}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullloading,expression:"fullloading"}],staticStyle:{"margin-top":"10px"}},[s("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"center","align-items":"center"}},[s("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"默认展示部分用户，可以通过用户名搜索更多用户...","prefix-icon":"el-icon-search",size:"small"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("搜索")])],1),e._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap","text-align":"left"}},e._l(e.hrs,function(t,i){return s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading[i],expression:"cardLoading[index]"}],key:t.id,staticStyle:{width:"350px","margin-bottom":"20px"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(t.name))]),e._v(" "),s("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.deleteHr(t.id)}}})],1),e._v(" "),s("div",[s("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[s("img",{staticStyle:{width:"70px",height:"70px","border-radius":"70px"},attrs:{src:t.userface,alt:"item.name"}})]),e._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("div",[s("span",{staticClass:"user-info"},[e._v("用户名:"+e._s(t.name))])]),e._v(" "),s("div",[s("span",{staticClass:"user-info"},[e._v("手机号码:"+e._s(t.phone))])]),e._v(" "),s("div",[s("span",{staticClass:"user-info"},[e._v("电话号码:"+e._s(t.telephone))])]),e._v(" "),s("div",[s("span",{staticClass:"user-info"},[e._v("地址:"+e._s(t.address))])]),e._v(" "),s("div",{staticClass:"user-info",staticStyle:{display:"flex","align-items":"center","margin-bottom":"3px"}},[e._v("\n              用户状态:\n              "),s("el-switch",{key:t.id,staticStyle:{display:"inline","margin-left":"5px"},attrs:{"active-color":"#13ce66","inactive-color":"#aaaaaa","active-text":"启用","inactive-text":"禁用"},on:{change:function(s){return e.switchChange(t.enabled,t.id,i)}},model:{value:t.enabled,callback:function(s){e.$set(t,"enabled",s)},expression:"item.enabled"}})],1),e._v(" "),s("div",{staticClass:"user-info"},[e._v("\n              用户角色:\n              "),e._l(t.roles,function(t){return s("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[e._v(e._s(t.nameZh)+"\n              ")])}),e._v(" "),s("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.eploading[i],expression:"eploading[index]"}],key:t.id,attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(s){return e.updateHrRoles(t.id,i)}}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.selRoles,callback:function(t){e.selRoles=t},expression:"selRoles"}},e._l(e.allRoles,function(e){return s("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id}})}),1),e._v(" "),s("el-button",{staticStyle:{color:"#09c0f6","padding-top":"0px"},attrs:{slot:"reference",type:"text",icon:"el-icon-more",disabled:e.moreBtnState},on:{click:function(s){return e.loadSelRoles(t.roles,i)}},slot:"reference"})],1)],2),e._v(" "),s("div",[s("span",{staticClass:"user-info"},[e._v("备注:"+e._s(t.remark))])])])])])}),1)])},staticRenderFns:[]};var n=s("VU/8")(i,a,!1,function(e){s("5oPJ")},null,null);t.default=n.exports},gQW8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n={data:function(){return{repoApi:[],value:"",search:""}},computed:{searchData:function(){var e=this,t=this.search;return console.log("search = "+t),t?this.repoApi.filter(function(t){return t.name.toLowerCase().startsWith(e.search.toLowerCase())}):this.repoApi},user:function(){return this.$store.state.user}},mounted:function(){this.initData()},filters:{formatDate:function(e){var t=new Date(e),s=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var a=t.getDate();a=a<10?"0"+a:a;var n=t.getHours();n=n<10?"0"+n:n;var r=t.getMinutes();r=r<10?"0"+r:r;var o=t.getSeconds();return s+"-"+i+"-"+a+" "+n+":"+r+":"+(o=o<10?"0"+o:o)}},methods:{initData:function(){var e=this;this.getRequest("https://api.github.com/users/"+this.user.githubName+"/repos").then(function(t){if(t&&200==t.status){var s=t.data,i={Java:"#b07219",JavaScript:"#f1e05a",HTML:"#e34c26",Swift:"#ffac45",Python:"#3572A5","C++":"#f34b7d",Go:"#00ADD8",Shell:"#89e051"};for(var a in s.sort(function(e,t){return new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()}),s)s[a].color=i[s[a].language];e.repoApi=s,console.log(s)}})},clearSearch:function(){this.search=""},createJenkinsJob:function(e,t){var s=(new Date).getTime()/1e3;console.log(e,t),this.$store.commit("setRepoName",e),this.$store.commit("setProjectName",e+s),this.$store.commit("setLanguage",t),window.localStorage.setItem("repoName",a()(e)),window.localStorage.setItem("projectName",a()(e+s)),window.localStorage.setItem("language",a()(t));this.loading=!0,this.$router.push({path:"/config/server"})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-steps",{staticClass:"process",attrs:{active:0,simple:""}},[s("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),s("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),s("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),s("div",{staticClass:"new-pipeline"},[e._v("New Pipeline")]),e._v(" "),s("div",{staticClass:"title"},[e._v("Select a repository")]),e._v(" "),s("br"),e._v(" "),s("div",{staticClass:"repo-filter"},[s("i",{staticClass:"el-icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"repo-filter-search-input",attrs:{placeholder:"filter by keywords"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),s("i",{staticClass:"el-icon-close",on:{click:function(t){return e.clearSearch()}}})]),e._v(" "),e.searchData.length>0?s("div",{staticStyle:{width:"70%"}},e._l(e.searchData,function(t){return s("div",{staticClass:"repo-list",on:{click:function(s){return e.createJenkinsJob(t.name,t.language)}}},[s("img",{staticClass:"repo-img",attrs:{src:t.owner.avatar_url}}),e._v(" "),s("div",{staticStyle:{float:"left",margin:"8px 0 8px 0"}},[s("div",[s("span",{staticClass:"repo-name"},[e._v(e._s(t.full_name))]),e._v(" "),t.fork?s("span",{staticClass:"repo-fork"},[e._v("fork")]):e._e()]),e._v(" "),s("span",{staticClass:"repo-time",attrs:{height:"auto"}},[e._v(e._s(e._f("formatDate")(t.updated_at)))])]),e._v(" "),s("div",{staticClass:"repo-language"},[s("span",{staticClass:"repo-language-color",style:{background:t.color}}),e._v(" "),s("span",[e._v(e._s(t.language))])])])}),0):s("div",{staticStyle:{width:"70%"}},[s("i",{staticClass:"el-icon-coffee-cup"}),e._v(" "),s("span",[e._v("No matching repositories were found. If you can't find a repository, make sure you provide access.You may also select a specific connection.")])])],1)},staticRenderFns:[]};var o=s("VU/8")(n,r,!1,function(e){s("0tRa")},null,null);t.default=o.exports},kVG2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-steps",{attrs:{active:3,simple:""}},[s("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),s("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),s("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}}),e._v(" "),s("el-step",{attrs:{title:"Build",icon:"el-icon-lightning"}}),e._v(" "),s("el-step",{attrs:{title:"Result",icon:"el-icon-s-promotion"}})],1),e._v(" "),s("h1",{staticClass:"title"},[e._v("Build Job")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:e.startBuild}},[e._v("Start Building")])],1)},staticRenderFns:[]};var a=s("VU/8")({data:function(){return{textarea:""}},methods:{startBuild:function(){var e=this,t=this;this.loading=!0,this.postRequest("/jenkins/build",{jobName:this.$store.state.projectName}).then(function(s){t.loading=!1,s&&200==s.status&&e.$router.push({path:"/output"})})}}},i,!1,function(e){s("Fl6l")},null,null);t.default=a.exports},lgBs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Lakc"),a={data:function(){return{codes:""}},methods:{initData:function(){var e=this;this.postRequest("/github/content",{repo:JSON.parse(window.localStorage.getItem("repoName")),language:JSON.parse(window.localStorage.getItem("language")),githubName:this.user.githubName,githubToken:this.user.githubToken,type:JSON.parse(window.localStorage.getItem("jenkinsId"))}).then(function(t){t&&200==t.status&&(console.log("resp.data = "+t.data.obj),e.codes=t.data.obj,e.initEditor())})},initEditor:function(){this.monacoEditor=i.a.create(this.$refs.container,{value:this.codes,language:"javascript",theme:"vs",fontSize:14,automaticLayout:!0,autoIndent:!0,editorOptions:this.editorOptions})},submitJenkinsfile:function(){var e=this,t=this;this.loading=!0;var s=JSON.parse(window.localStorage.getItem("jenkinsId"));this.postRequest("/project/update",{name:JSON.parse(window.localStorage.getItem("projectName")),type:0,enable:!0}).then(function(e){}),this.postRequest("/github/commit",{codeContent:this.monacoEditor.getValue(),repo:JSON.parse(window.localStorage.getItem("repoName")),githubName:this.user.githubName,githubToken:this.user.githubToken}).then(function(i){t.loading=!1,i&&200==i.status&&(e.loading=!0,e.postRequest("/jenkins/build",{jobName:JSON.parse(window.localStorage.getItem("projectName")),type:s}).then(function(e){t.loading=!1,e&&200==e.status&&(1==s||2==s?window.open("http://3.15.149.72:8080/job/"+JSON.parse(window.localStorage.getItem("projectName"))):3==s&&window.open("http://13.125.214.112:30002/job/"+JSON.parse(window.localStorage.getItem("projectName"))))}))})}},mounted:function(){this.initData()},computed:{user:function(){return this.$store.state.user}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-steps",{staticClass:"process",attrs:{active:2,simple:""}},[s("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),s("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),s("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),s("div",{staticClass:"header-section"},[e._m(0),e._v(" "),s("button",{staticClass:"run-button",staticStyle:{"align-self":"flex-end"},on:{click:e.submitJenkinsfile}},[e._v("Save and run")])]),e._v(" "),s("div",{staticClass:"monaco-container"},[s("div",{staticClass:"file-name"},[e._v("JenkinsFile")]),e._v(" "),s("div",{ref:"container",staticClass:"monaco-editor"})])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"new-pipeline"},[this._v("New Pipeline")]),this._v(" "),t("div",{staticClass:"title"},[this._v("Review your jenkins file")])])}]};var r=s("VU/8")(a,n,!1,function(e){s("51DM")},null,null);t.default=r.exports},vIsk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("Lakc"),r={data:function(){return{formLabelAlign:{serverId:"",bashContent:""},serverList:[{serverName:"Windows Server",serverId:1},{serverName:"Linux Server",serverId:2},{serverName:"Docker",serverId:3}],codes:"",readOnly:!1,editorOptions:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:this.readOnly,cursorStyle:"line",automaticLayout:!1,glyphMargin:!0,useTabStops:!1,fontSize:28,autoIndent:!1}}},methods:{initEditor:function(){this.monacoEditor=n.a.create(this.$refs.container,{value:this.codes,language:"javascript",theme:"vs",fontSize:14,automaticLayout:!0,autoIndent:!0,editorOptions:this.editorOptions})},nextStep:function(){var e=this,t=this;this.loading=!0;var s=this.formLabelAlign.serverId;window.localStorage.setItem("jenkinsId",a()(s));var i=JSON.parse(window.localStorage.getItem("projectName")),n=JSON.parse(window.localStorage.getItem("repoName")),r=this.user.githubName,o=JSON.parse(window.localStorage.getItem("language"));console.log("type = "+s),this.postRequest("/jenkins/create",{projectName:i,repo:n,githubName:r,type:s}).then(function(a){a&&200==a.status&&e.postRequest("/project/add",{name:i,author:e.user.name,language:o,type:s}).then(function(s){t.loading=!1,s&&200==s.status&&e.$router.push({path:"/config/jkfile"})})})},submitBash:function(){var e=this;this.loading=!0;var t=this.formLabelAlign.serverId;1==t||2==t?this.postRequest("/server/run",{serverId:this.formLabelAlign.serverId,bashContent:this.monacoEditor.getValue()}).then(function(t){if(e.loading=!1,t&&200==t.status){var s=t.data;alert(s)}}):alert("Only server can press this button!")}},mounted:function(){this.initEditor()},computed:{user:function(){return this.$store.state.user}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-steps",{staticClass:"process",attrs:{active:1,simple:""}},[s("el-step",{attrs:{title:"Create",icon:"el-icon-circle-plus-outline"}}),e._v(" "),s("el-step",{attrs:{title:"Server",icon:"el-icon-upload"}}),e._v(" "),s("el-step",{attrs:{title:"Jenkinsfile",icon:"el-icon-edit"}})],1),e._v(" "),s("div",{staticClass:"header-section"},[s("div",[s("div",{staticClass:"new-pipeline"},[e._v("New Pipeline")]),e._v(" "),s("div",{staticClass:"sub-header-section"},[s("div",{staticClass:"title"},[e._v("Select your environment")]),e._v(" "),s("el-form",{attrs:{"label-width":"20px",model:e.formLabelAlign}},[s("el-form-item",{staticStyle:{margin:"0px"}},[s("el-select",{staticClass:"form",attrs:{placeholder:"Select environment"},model:{value:e.formLabelAlign.serverId,callback:function(t){e.$set(e.formLabelAlign,"serverId",t)},expression:"formLabelAlign.serverId"}},e._l(e.serverList,function(e,t){return s("el-option",{key:t,attrs:{label:e.serverName,value:e.serverId}})}),1)],1)],1),e._v(" "),s("button",{staticClass:"run-button",staticStyle:{"align-self":"flex-end","margin-left":"20px"},on:{click:e.submitBash}},[e._v("Submit")])],1)]),e._v(" "),s("button",{staticClass:"run-button",staticStyle:{"align-self":"flex-end"},on:{click:e.nextStep}},[e._v("Next")])]),e._v(" "),s("div",{staticClass:"monaco-container"},[s("div",{staticClass:"file-name"},[e._v("Please Input Bash Script")]),e._v(" "),s("div",{ref:"container",staticClass:"monaco-editor"})])],1)},staticRenderFns:[]};var l=s("VU/8")(r,o,!1,function(e){s("HtLs")},null,null);t.default=l.exports}});
//# sourceMappingURL=1.3965f5d1ac46ee627748.js.map